/**
 * smtp.js
 * ---------------
 * Email controller
 */
module.exports = (function () {

    // ------------------------------------------------------------------------
    //              i m p o r t s
    // ------------------------------------------------------------------------

    var _CONST = require('/scripts/constants');

    // ------------------------------------------------------------------------
    //              c o n s t
    // ------------------------------------------------------------------------

    var FILE = 'scripts/smtp.js';// used only for logs

    // ------------------------------------------------------------------------
    //              f i e l d s
    // ------------------------------------------------------------------------

    // ------------------------------------------------------------------------
    //              i n s t a n c e
    // ------------------------------------------------------------------------

    var instance = {};

    instance.send = function (subject, message, target) {
        try {
            var config = require('/config/smtp.json');
            $smtp.open(config).sendAsync(subject, message, target, function(err){
                if(!!err){
                    console.error(FILE + '#send', err);
                }
            });
        } catch (err) {
            // error loading configuration
            console.error(FILE + '#send<LOADING CONFIGURATION>', err);
        }
    };

    // ------------------------------------------------------------------------
    //              p r i v a t e
    // ------------------------------------------------------------------------



    // ------------------------------------------------------------------------
    //              e x p o r t s
    // ------------------------------------------------------------------------


    return instance;


})();